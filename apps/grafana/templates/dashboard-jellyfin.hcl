variable "dashboard_jellyfin" {
  default = <<-EOH
{"annotations":{"list":[]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":1,"id":null,"links":[],"panels":[{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":1,"panels":[],"title":"Jellyfin Info","type":"row"},{"datasource":{"type":"prometheus","uid":"$${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"mappings":[{"options":{"0":{"color":"red","index":1,"text":"DOWN"},"1":{"color":"green","index":0,"text":"UP"}},"type":"value"}],"thresholds":{"mode":"absolute","steps":[{"color":"red","value":null},{"color":"green","value":1}]}},"overrides":[]},"gridPos":{"h":4,"w":3,"x":0,"y":1},"id":2,"options":{"colorMode":"value","graphMode":"none","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"title":"Status","type":"stat","targets":[{"expr":"up{job=\"jellyfin-http\"}","refId":"A"}]},{"datasource":{"type":"prometheus","uid":"$${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"blue","value":null}]}},"overrides":[]},"gridPos":{"h":4,"w":4,"x":3,"y":1},"id":3,"options":{"colorMode":"value","graphMode":"none","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"/^os_version$/","values":false},"textMode":"value"},"title":"OS Version","type":"stat","targets":[{"expr":"dotnet_build_info{job=\"jellyfin-http\"}","format":"table","instant":true,"refId":"A"}]},{"datasource":{"type":"prometheus","uid":"$${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"purple","value":null}]}},"overrides":[]},"gridPos":{"h":4,"w":4,"x":7,"y":1},"id":4,"options":{"colorMode":"value","graphMode":"none","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"/^runtime_version$/","values":false},"textMode":"value"},"title":".NET Version","type":"stat","targets":[{"expr":"dotnet_build_info{job=\"jellyfin-http\"}","format":"table","instant":true,"refId":"A"}]},{"datasource":{"type":"prometheus","uid":"$${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"max":1,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":0.1},{"color":"red","value":0.3}]},"unit":"percentunit"},"overrides":[]},"gridPos":{"h":4,"w":3,"x":11,"y":1},"id":5,"options":{"minVizHeight":75,"minVizWidth":75,"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"sizing":"auto"},"title":"GC Pause Ratio","type":"gauge","targets":[{"expr":"dotnet_gc_pause_ratio{job=\"jellyfin-http\"}","refId":"A"}]},{"datasource":{"type":"prometheus","uid":"$${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":4,"w":3,"x":14,"y":1},"id":6,"options":{"colorMode":"value","graphMode":"area","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"title":"GC Memory Available","type":"stat","targets":[{"expr":"dotnet_gc_memory_total_available_bytes{job=\"jellyfin-http\"}","refId":"A"}]},{"datasource":{"type":"prometheus","uid":"$${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"purple","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":4,"w":3,"x":17,"y":1},"id":7,"options":{"colorMode":"value","graphMode":"area","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"title":"JIT Methods","type":"stat","targets":[{"expr":"dotnet_jit_method_total{job=\"jellyfin-http\"}","refId":"A"}]},{"datasource":{"type":"prometheus","uid":"$${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":10},{"color":"red","value":50}]},"unit":"short"},"overrides":[]},"gridPos":{"h":4,"w":3,"x":20,"y":1},"id":8,"options":{"colorMode":"value","graphMode":"area","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"title":"Lock Contention/min","type":"stat","targets":[{"expr":"rate(dotnet_contention_total{job=\"jellyfin-http\"}[5m])*60","refId":"A"}]},{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":5},"id":10,"panels":[],"title":"Memory & GC","type":"row"},{"datasource":{"type":"prometheus","uid":"$${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":20,"gradientMode":"none","lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":6},"id":11,"options":{"legend":{"calcs":["mean","max"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"title":"Memory Usage","type":"timeseries","targets":[{"expr":"dotnet_total_memory_bytes{job=\"jellyfin-http\"}","legendFormat":"Total Memory","refId":"A"},{"expr":"dotnet_gc_heap_size_bytes{job=\"jellyfin-http\"}","legendFormat":"GC Heap Size","refId":"B"}]},{"datasource":{"type":"prometheus","uid":"$${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":6},"id":12,"options":{"legend":{"calcs":["mean","max"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"title":"GC Collections (rate/min)","type":"timeseries","targets":[{"expr":"rate(dotnet_gc_collection_count_total{job=\"jellyfin-http\"}[5m])*60","legendFormat":"Gen {{generation}}","refId":"A"}]},{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":14},"id":20,"panels":[],"title":"Network & Threads","type":"row"},{"datasource":{"type":"prometheus","uid":"$${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":20,"gradientMode":"none","lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"Bps"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":15},"id":21,"options":{"legend":{"calcs":["mean","max"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"title":"Network Traffic","type":"timeseries","targets":[{"expr":"rate(dotnet_sockets_bytes_received_total{job=\"jellyfin-http\"}[5m])","legendFormat":"Received","refId":"A"},{"expr":"rate(dotnet_sockets_bytes_sent_total{job=\"jellyfin-http\"}[5m])","legendFormat":"Sent","refId":"B"}]},{"datasource":{"type":"prometheus","uid":"$${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":15},"id":22,"options":{"legend":{"calcs":["mean","max"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"title":"Socket Connections (rate/min)","type":"timeseries","targets":[{"expr":"rate(dotnet_sockets_connections_established_incoming_total{job=\"jellyfin-http\"}[5m])*60","legendFormat":"Incoming","refId":"A"},{"expr":"rate(dotnet_sockets_connections_established_outgoing_total{job=\"jellyfin-http\"}[5m])*60","legendFormat":"Outgoing","refId":"B"}]},{"datasource":{"type":"prometheus","uid":"$${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":23},"id":23,"options":{"legend":{"calcs":["mean","max"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"title":"ThreadPool","type":"timeseries","targets":[{"expr":"dotnet_threadpool_num_threads{job=\"jellyfin-http\"}","legendFormat":"Threads","refId":"A"},{"expr":"dotnet_threadpool_timer_count{job=\"jellyfin-http\"}","legendFormat":"Timers","refId":"B"}]},{"datasource":{"type":"prometheus","uid":"$${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"bars","fillOpacity":50,"gradientMode":"none","lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":1}]},"unit":"short"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":23},"id":24,"options":{"legend":{"calcs":["sum"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"title":"Exceptions (rate/min)","type":"timeseries","targets":[{"expr":"rate(dotnet_exceptions_total{job=\"jellyfin-http\"}[5m])*60","legendFormat":"Exceptions","refId":"A"}]},{"datasource":{"type":"prometheus","uid":"$${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"Bps"},"overrides":[]},"gridPos":{"h":8,"w":24,"x":0,"y":14},"id":13,"options":{"legend":{"calcs":["mean","max"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"title":"GC Allocated Bytes Rate","type":"timeseries","targets":[{"expr":"rate(dotnet_gc_allocated_bytes_total{job=\"jellyfin-http\"}[5m])","legendFormat":"Allocated","refId":"A"}]},{"datasource":{"type":"prometheus","uid":"$${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":20,"gradientMode":"none","lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"ops"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":31},"id":25,"options":{"legend":{"calcs":["mean","max"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"title":"ThreadPool Throughput","type":"timeseries","targets":[{"expr":"rate(dotnet_threadpool_throughput_total{job=\"jellyfin-http\"}[5m])","legendFormat":"Work Items/s","refId":"A"}]},{"datasource":{"type":"prometheus","uid":"$${DS_PROMETHEUS}"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":20,"gradientMode":"none","lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"bytes"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":31},"id":26,"options":{"legend":{"calcs":["mean","max"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"desc"}},"title":"JIT Compiled","type":"timeseries","targets":[{"expr":"dotnet_jit_il_bytes{job=\"jellyfin-http\"}","legendFormat":"IL Bytes","refId":"A"},{"expr":"dotnet_jit_method_total{job=\"jellyfin-http\"}","legendFormat":"Methods","refId":"B"}]}],"refresh":"30s","schemaVersion":39,"tags":["jellyfin","media"],"templating":{"list":[{"current":{"selected":true,"text":"VictoriaMetrics","value":"P4169E866C3094E38"},"hide":0,"includeAll":false,"label":"Datasource","multi":false,"name":"DS_PROMETHEUS","options":[],"query":"prometheus","refresh":1,"regex":"","skipUrlSync":false,"type":"datasource"}]},"time":{"from":"now-6h","to":"now"},"timepicker":{},"timezone":"browser","title":"Jellyfin","uid":"jellyfin","version":1}
EOH
}
